{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigests",
    ":semanticCommits",
    ":dependencyDashboard",
    ":configMigration",
    "group:kubernetes"
  ],
  "dependencyDashboardTitle": "Renovate Dashboard :robot:",
  "branchPrefix": "renovate/",
  "timezone": "America/New_York",
  "postUpdateOptions": ["gomodTidy"],
  "rebaseWhen": "conflicted",
  "prConcurrentLimit": 5,
  "prHourlyLimit": 2,
  "schedule": ["after 10pm", "before 6am"],
  "osvVulnerabilityAlerts": true,
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["before 4am on monday"],
    "automerge": true,
    "automergeType": "branch"
  },
  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": ["security", "priority/high"],
    "automerge": true,
    "schedule": ["at any time"]
  },
  "packageRules": [
    {
      "description": "Group gptscript-ai packages",
      "groupName": "gptscript packages",
      "matchPackageNames": ["/^github.com/gptscript-ai//"]
    },
    {
      "description": "Group golang.org/x packages",
      "groupName": "golang.org/x packages",
      "matchPackageNames": ["/^golang.org/x//"]
    },
    {
      "description": "Group obot-platform packages",
      "groupName": "obot-platform packages",
      "matchPackageNames": ["/^github.com/obot-platform//"]
    },
    {
      "description": "Group all k8s.io packages together (must update in lockstep)",
      "groupName": "kubernetes packages",
      "matchPackageNames": ["/^k8s.io//", "/^sigs.k8s.io//"]
    },
    {
      "description": "Disable automerge for k8s digest updates (require manual review)",
      "matchPackageNames": ["/^k8s.io//", "/^sigs.k8s.io//"],
      "matchUpdateTypes": ["digest"],
      "automerge": false
    },
    {
      "description": "Group Svelte ecosystem packages",
      "groupName": "svelte packages",
      "matchPackageNames": ["/^@sveltejs//", "/^svelte/"]
    },
    {
      "description": "Group Tailwind CSS packages",
      "groupName": "tailwind packages",
      "matchPackageNames": ["/^tailwindcss/", "/^@tailwindcss//"]
    },
    {
      "description": "Group AWS SDK v2 packages",
      "groupName": "aws-sdk packages",
      "matchPackageNames": ["/^github.com/aws/aws-sdk-go-v2//"]
    },
    {
      "description": "Restrict Helm to v3.x (Helm 4 not yet production ready)",
      "matchPackageNames": ["azure/setup-helm", "/helm/"],
      "allowedVersions": "<4.0.0"
    },
    {
      "description": "Auto-merge GitHub Actions (grouped)",
      "matchManagers": ["github-actions"],
      "groupName": "github-actions",
      "groupSlug": "github-actions",
      "matchUpdateTypes": ["minor", "patch", "digest"],
      "automerge": true,
      "automergeType": "branch",
      "minimumReleaseAge": "3 days"
    },
    {
      "description": "Auto-merge Go patch updates",
      "matchManagers": ["gomod"],
      "matchUpdateTypes": ["patch", "digest"],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "3 days"
    },
    {
      "description": "Auto-merge npm patch updates",
      "matchManagers": ["npm"],
      "matchUpdateTypes": ["patch"],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "3 days"
    },
    {
      "matchUpdateTypes": ["major"],
      "semanticCommitType": "feat",
      "commitMessagePrefix": "{{semanticCommitType}}({{semanticCommitScope}})!:",
      "commitMessageExtra": "( {{currentVersion}} → {{newVersion}} )",
      "labels": ["type/major"]
    },
    {
      "matchUpdateTypes": ["minor"],
      "semanticCommitType": "feat",
      "commitMessageExtra": "( {{currentVersion}} → {{newVersion}} )",
      "labels": ["type/minor"]
    },
    {
      "matchUpdateTypes": ["patch"],
      "semanticCommitType": "fix",
      "commitMessageExtra": "( {{currentVersion}} → {{newVersion}} )",
      "labels": ["type/patch"]
    },
    {
      "matchUpdateTypes": ["digest"],
      "semanticCommitType": "chore",
      "commitMessageExtra": "( {{currentDigestShort}} → {{newDigestShort}} )",
      "labels": ["type/digest"]
    },
    {
      "matchManagers": ["github-actions"],
      "semanticCommitType": "ci",
      "semanticCommitScope": "github-action",
      "commitMessageTopic": "action {{depName}}"
    },
    {
      "matchManagers": ["gomod"],
      "semanticCommitScope": "go",
      "commitMessageTopic": "module {{depName}}"
    },
    {
      "matchManagers": ["npm"],
      "semanticCommitScope": "npm",
      "commitMessageTopic": "package {{depName}}"
    },
    {
      "description": "Block moby/api and moby/client upgrades until docker/cli transitive dependency is resolved. Blocked at v1.52.0-alpha.1 + v0.1.0-alpha.0 due to: gptscript → docker/cli v26.0.0 → requires removed packages (types/versions, types/time, types/filters). See: https://github.com/moby/moby/discussions/51463",
      "matchPackageNames": [
        "github.com/moby/moby/api",
        "github.com/moby/moby/client"
      ],
      "enabled": false
    },
    {
      "description": "Pin oauth2-proxy to v7.0.0-20251212211434-21828db641ee (commit 21828db641ee). This version uses 'package oauth2proxy' which is importable. Newer commits revert to 'package main' causing build failures. Block all updates until upstream stabilizes. See: commit c4ffd2e6 (original fix), PR #43 (regression), commit c440527c (revert fix)",
      "matchPackageNames": [
        "github.com/obot-platform/oauth2-proxy/v7",
        "github.com/oauth2-proxy/oauth2-proxy/v7"
      ],
      "enabled": false
    }
  ]
}
